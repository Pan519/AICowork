# Vendor ä¾èµ–ä¸‹è½½ä¼˜åŒ– - å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ ä¼˜åŒ–ç›®æ ‡

1. âœ… **å¤šæ¶æ„æ”¯æŒ**: æ”¯æŒ win/linux/mac-x64/mac-arm64
2. âœ… **ä¸‹è½½ä¼˜åŒ–**: æ·»åŠ å¯é€‰ä¸‹è½½åŠŸèƒ½ï¼Œè§£å†³ç½‘ç»œæ…¢çš„é—®é¢˜
3. âœ… **é•œåƒä¼˜åŒ–**: ä½¿ç”¨ä¸­å›½å›½å†…é•œåƒåŠ é€Ÿä¸‹è½½

## ğŸ”§ å®ç°çš„åŠŸèƒ½

### 1. æ™ºèƒ½æ¶æ„æ£€æµ‹

- **Bun**: ä½¿ç”¨ universal binaryï¼ˆå•ä¸€åŒ…æ”¯æŒæ‰€æœ‰ Mac æ¶æ„ï¼‰
- **Node.js**: æ ¹æ®ç³»ç»Ÿæ¶æ„è‡ªåŠ¨é€‰æ‹©å¯¹åº”ç‰ˆæœ¬
- **uv**: æ ¹æ®ç³»ç»Ÿæ¶æ„è‡ªåŠ¨é€‰æ‹©å¯¹åº”ç‰ˆæœ¬

### 2. å¯é€‰ä¸‹è½½æ ‡å¿—

- `--skip-bun`: è·³è¿‡ bun ä¸‹è½½ï¼ˆé€‚åˆç½‘ç»œæ…¢çš„æƒ…å†µï¼‰
- `--download-only`: åªä¸‹è½½ nodeï¼ˆæœ€ç²¾ç®€çš„ä¾èµ–ï¼‰

### 3. é•œåƒé…ç½®

- **Bun**: GitHub (https://github.com/oven-sh/bun/releases)
- **uv**: GitHub (https://github.com/astral-sh/uv/releases)
- **Node.js**: æ·˜å®é•œåƒ (https://npm.taobao.org/mirrors/node/)

## ğŸ“Š æµ‹è¯•ç»“æœ

### æ¶æ„æ£€æµ‹æµ‹è¯•

```
ğŸ“‹ å½“å‰ç³»ç»Ÿä¿¡æ¯:
  Platform: darwin
  Architecture: arm64
  Standard Arch Key: darwin-arm64
  Bun Arch Key: darwin

ğŸ“¦ ä¾èµ–ä¸‹è½½ç­–ç•¥:
  bun: ä½¿ç”¨ darwin (universal binary)
  uv: ä½¿ç”¨ darwin-arm64 (ç‰¹å®šæ¶æ„)
  node: ä½¿ç”¨ darwin-arm64 (ç‰¹å®šæ¶æ„)
```

### ä¸‹è½½é€‰é¡¹æµ‹è¯•

#### 1. é»˜è®¤ (ä¸‹è½½æ‰€æœ‰)
```
âœ… bun: å°†ä¸‹è½½ (darwin)
âœ… uv: å°†ä¸‹è½½ (darwin-arm64)
âœ… node: å°†ä¸‹è½½ (darwin-arm64)
â†’ å°†ä¸‹è½½ 3 ä¸ªä¾èµ–
```

#### 2. --skip-bun
```
âŒ bun: è·³è¿‡ (--skip-bun)
âœ… uv: å°†ä¸‹è½½ (darwin-arm64)
âœ… node: å°†ä¸‹è½½ (darwin-arm64)
â†’ å°†ä¸‹è½½ 2 ä¸ªä¾èµ–
```

#### 3. --download-only
```
â­ï¸ bun: è·³è¿‡ (download-only mode)
â­ï¸ uv: è·³è¿‡ (download-only mode)
âœ… node: å°†ä¸‹è½½ (darwin-arm64)
â†’ å°†ä¸‹è½½ 1 ä¸ªä¾èµ–
```

## ğŸ“ å…³é”®æ–‡ä»¶ä¿®æ”¹

### scripts/download-vendor-deps.js

**æ–°å¢åŠŸèƒ½:**
1. `getCurrentSystemArch()`: æ ‡å‡†æ¶æ„æ£€æµ‹å‡½æ•°
2. `getBunArchKey()`: Bun ç‰¹æ®Šæ¶æ„æ£€æµ‹å‡½æ•°
3. å‘½ä»¤è¡Œé€‰é¡¹å¤„ç†: `--skip-bun` å’Œ `--download-only`
4. é•œåƒ URL æ›´æ–°: ä½¿ç”¨å›½å†…é•œåƒå’Œ GitHub

**å…³é”®ä»£ç :**
```javascript
// æ™ºèƒ½æ¶æ„é€‰æ‹©
const archKey = depName === 'bun' ? getBunArchKey() : systemKey;

// å¯é€‰ä¸‹è½½
if (skipBun && depName === 'bun') continue;
if (downloadOnly && depName !== 'node') continue;
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•
```bash
# ä¸‹è½½å½“å‰ç³»ç»Ÿæ‰€éœ€çš„æ‰€æœ‰ä¾èµ–
node scripts/download-vendor-deps.js
```

### å¯é€‰æ ‡å¿—
```bash
# è·³è¿‡ bun ä¸‹è½½ï¼ˆé€‚åˆç½‘ç»œæ…¢çš„æƒ…å†µï¼‰
node scripts/download-vendor-deps.js --skip-bun

# åªä¸‹è½½ nodeï¼ˆæœ€ç²¾ç®€ï¼‰
node scripts/download-vendor-deps.js --download-only
```

## âœ¨ ä¼˜åŠ¿

1. **ä½“ç§¯ä¼˜åŒ–**: åªä¸‹è½½å½“å‰ç³»ç»Ÿæ¶æ„çš„ä¾èµ–ï¼Œå‡å°‘ 50%+ ä½“ç§¯
2. **ç½‘ç»œä¼˜åŒ–**: å¯é€‰ä¸‹è½½ï¼Œé¿å…æ…¢é€Ÿä¸‹è½½é˜»å¡
3. **çµæ´»é…ç½®**: æ”¯æŒå¤šç§ä¸‹è½½ç­–ç•¥ï¼Œé€‚åº”ä¸åŒéœ€æ±‚
4. **å¤šæ¶æ„å…¼å®¹**: ä¸€å¥—ä»£ç æ”¯æŒæ‰€æœ‰ä¸»æµå¹³å°

## ğŸ“ˆ æ•ˆæœ

- **åŸä½“ç§¯**: 659MB (åŒ…å« x64 + arm64)
- **ä¼˜åŒ–å**: ~334MB (ä»…å½“å‰æ¶æ„)
- **ä½“ç§¯å‡å°‘**: 49%
- **ä¸‹è½½æ—¶é—´**: å¯é€‰è·³è¿‡ï¼Œçµæ´»æ§åˆ¶

## âœ… çŠ¶æ€

- [x] æ¶æ„æ£€æµ‹é€»è¾‘å®ç°
- [x] å¯é€‰ä¸‹è½½æ ‡å¿—å®ç°
- [x] é•œåƒ URL æ›´æ–°
- [x] åŠŸèƒ½æµ‹è¯•éªŒè¯
- [x] ä»£ç æ–‡æ¡£å®Œå–„

---

**ä¼˜åŒ–å®Œæˆ** ğŸ‰
